@model WebApp.ViewModels.ChangePasswordViewModel

@using Microsoft.AspNetCore.Mvc.Localization

@inject IViewLocalizer Localizer

@inject IHtmlLocalizer<SharedRes> SharedLocalizer

<h2>@SharedLocalizer["ChangeFor"]: @Model.Email</h2>


<input type="hidden" asp-for="Id" />

@*//@submit="save"*@
<form id="app" asp-action="ChangePassword" asp-controller="User">


    <p v-if="errors.length">
        <b>@SharedLocalizer["FixError"]:</b>
        <ul>
            <li v-for="error in errors">{{ error }}</li>

        </ul>
    </p>
    <div asp-validation-summary="ModelOnly" class="text-danger"></div>
    <div class="form-group">
        <label for="OldPassword">@SharedLocalizer["OldPassword"]</label>

        <input asp-for="OldPassword" type="password" class="form-control"
               name="OldPassword"
               v-model="OldPassword" placeholder="OldPassword ">
        <span asp-validation-for="OldPassword"></span>
    </div>
    <div class="form-group">
        <label for="NewPassword">@SharedLocalizer["NewPassword"]</label>

        <input asp-for="NewPassword" class="form-control"
               id="NewPassword" name="NewPassword"
               v-model="NewPassword" placeholder="NewPassword">
        <span asp-validation-for="NewPassword"></span>
    </div>

    <div class="form-group">
        <label for="NewPassword">@SharedLocalizer["ConfirmNewPassword"]</label>

        <input asp-for="ConfirmNewPassword" class="form-control"
               id="ConfirmNewPassword" name="ConfirmNewPassword"
               v-model="ConfirmNewPassword" placeholder="NewPassword">
        <span asp-validation-for="ConfirmNewPassword"></span>
    </div>
    <input type="hidden" class="test" value="@SharedLocalizer["SignOut"]" />


    <input v-on:click="save" type="submit" value="@SharedLocalizer["Save"]">

    @*<form id="app" asp-action="ChangePassword" asp-controller="User">
        <div asp-validation-summary="ModelOnly" class="text-danger"></div>

            <input type="hidden" asp-for="Id" />
            <input type="hidden" asp-for="Email" />
            <div class="form-group">
                <label asp-for="OldPassword" class="control-label">@SharedLocalizer["OldPassword"]</label>
                <input type="password" asp-for="OldPassword" class="form-control" />
                <span asp-validation-for="OldPassword"></span>
            </div>
            <div class="form-group">
                <label asp-for="NewPassword" class="control-label">@SharedLocalizer["NewPassword"]</label>
                <input type="password" asp-for="NewPassword" class="form-control" />
                <span asp-validation-for="NewPassword"></span>
            </div>
            <div class="form-group">
                <label asp-for="ConfirmNewPassword" class="control-label">@SharedLocalizer["ConfirmNewPassword"]</label>
                <input type="password" asp-for="ConfirmNewPassword" class="form-control" />
                <span asp-validation-for="ConfirmNewPassword"></span>
            </div>
            <div class="form-group">
                <input type="submit" value="@SharedLocalizer["Save"]" class="btn btn-default" />
            </div>*@
</form>

@*<script>
        let key = "fsfsfsfsfs";
        let app = new Vue({
            el: '#app',
            data: {
                errors: [],
                OldPassword: "",
                NewPassword: "",
                ConfirmNewPassword: ""

            },
            methods:
            {
                save: function (e) {
                    this.errors = [];

                    if (!this.OldPassword) this.errors.push("dadada");

                    if (this.OldPassword === "" || this.NewPassword === "" || this.ConfirmNewPassword === "") {

                        if (!this.errors.length) return true;
                        e.preventDefault();
                    }



                }
            }
        });

    </script>*@
@section Scripts{
    <script>
    var app = new Vue({
        el: '#app',
        data: {
            errors: [],
           // OldPassword: "",
            NewPassword: "",
            ConfirmNewPassword: ""

        },
        methods:
        {
            save: function (e) {
                this.errors = [];        
                if (!this.OldPassword) this.errors.push("@SharedLocalizer["FillPassword"]");
                if (!this.NewPassword) this.errors.push("@SharedLocalizer["FillNewPassword"]");
                if (!this.ConfirmNewPassword) this.errors.push("@SharedLocalizer["FillConfNewPassword"]");
                if (this.NewPassword !== this.ConfirmNewPassword) this.errors.push("@SharedLocalizer["DoesNotmatch"]");

                if (!this.errors.length) return true;
               e.preventDefault();
            }




        }
    });
    </script>
}
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>

@*<script src="~/js/Employee.bundle.js"></script>*@
